# 三才五格取名程序设计文档

## 一、核心功能模块

### 1. 五格计算模块
- 根据姓氏和名字笔画计算天格、人格、地格、总格、外格
- 支持单姓/复姓、单名/双名的不同组合
- 笔画数以康熙字典为准（文档中提供的字库）

### 2. 五行判断模块
- 根据数字尾数判断五行属性
  - 1-2：木
  - 3-4：火
  - 5-6：土
  - 7-8：金
  - 9-10：水

### 3. 三才配置评估模块
- 判断天格、人格、地格的五行相生相克关系
- 相生为吉：木生火、火生土、土生金、金生水、水生木
- 相克为凶：木克土、土克水、水克火、火克金、金克木

### 4. 81数理吉凶判断模块
- 根据文档提供的81数理吉凶表
- 吉数36个，凶数45个

### 5. 八字五行分析模块（可选增强）
- 根据出生年月日时计算八字
- 分析五行喜用神
- 名字五行配置与八字相配

### 6. 字库管理模块
- 常用汉字库（按笔画分类）
- 过滤生僻字
- 过滤不适合作为名字的字
- 字义美好、读音优美的字

### 7. 名字生成与评分模块
- 根据姓氏和要求生成候选名字
- 综合评分（五格、三才、数理、字义、音韵）
- 排序输出最佳候选

## 二、程序流程

```
输入：姓氏、性别、出生年月日
  ↓
计算八字五行（确定喜用神）
  ↓
从字库中筛选合适的字
  ↓
生成候选名字组合
  ↓
计算五格数理
  ↓
判断三才配置
  ↓
评估81数理吉凶
  ↓
综合评分排序
  ↓
输出：推荐名字列表（附详细分析）
```

## 三、数据结构

### 1. 汉字数据
```python
{
    "字": {
        "笔画": 7,
        "五行": "木",
        "拼音": "lin",
        "适合性别": ["男", "女"],
        "字义": "树木、森林",
        "常用度": 5
    }
}
```

### 2. 姓名分析结果
```python
{
    "姓名": "李世民",
    "五格": {
        "天格": {"数值": 8, "五行": "金", "吉凶": "吉"},
        "人格": {"数值": 12, "五行": "木", "吉凶": "凶"},
        "地格": {"数值": 10, "五行": "水", "吉凶": "凶"},
        "总格": {"数值": 17, "五行": "金", "吉凶": "吉"},
        "外格": {"数值": 6, "五行": "土", "吉凶": "吉"}
    },
    "三才": "金木水",
    "三才评价": "相克",
    "综合评分": 75,
    "详细分析": "..."
}
```

## 四、评分标准

1. **五格吉凶（40分）**
   - 全吉：40分
   - 4吉1凶：32分
   - 3吉2凶：24分
   - 以此类推

2. **三才配置（30分）**
   - 全相生：30分
   - 部分相生：20分
   - 有相克：10分
   - 严重相克：0分

3. **字义音韵（20分）**
   - 字义美好：10分
   - 读音优美：10分

4. **八字匹配（10分）**
   - 名字五行符合喜用神：10分
   - 部分符合：5分
   - 不符合：0分

## 五、技术实现

- 语言：Python 3
- 依赖库：
  - datetime（日期处理）
  - json（数据存储）
  - argparse（命令行参数）
  - 可选：pypinyin（拼音处理）

## 六、用户交互

### 命令行模式
```bash
python naming.py --surname 李 --gender 男 --birthdate 2024-01-01 --count 10
```

### 交互式模式
```
请输入姓氏：李
请输入性别（男/女）：男
请输入出生日期（YYYY-MM-DD）：2024-01-01
生成名字数量：10
```

## 七、输出格式

```
============ 取名结果 ============

推荐名字 1：李俊宇（综合评分：95分）
━━━━━━━━━━━━━━━━━━━━━━━━━━
【五格分析】
  天格：8（金）- 吉
  人格：16（土）- 吉
  地格：15（土）- 吉
  总格：22（木）- 凶
  外格：7（金）- 吉

【三才配置】金土土 - 相生，大吉

【数理详解】
  天格8：意志刚健的勤勉发展数
  人格16：贵人相助兴家兴业的大吉数
  ...

【字义解析】
  俊：才智出众，容貌俊美
  宇：气宇轩昂，胸怀广阔

【音韵分析】
  读音：lǐ jùn yǔ
  声调：上声 去声 上声（抑扬顿挫）
  
━━━━━━━━━━━━━━━━━━━━━━━━━━

...
```
